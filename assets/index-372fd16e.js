import{_ as R}from"./BaseBreadcrumb.vue_vue_type_style_index_0_lang-22b61556.js";import{v as k,a6 as x,T as c,G as b,U as B,o as u,q as f,a as o,w as l,V as P,f as U,a7 as A,c as g,d as y,e as v,b as D,a8 as E,F as V,s as O,l as h,t as T,H as $,a9 as j,aa as I,a3 as p,ab as J,x as L,n as G}from"./index-6f92a62f.js";import{_ as H}from"./_plugin-vue_export-helper-c27b6911.js";const W={class:"d-flex"},z={key:0},K=k({__name:"addCategoryForm",setup(w){const m=x(),n=c(!1),t=c(!1),d=c(null),r=c({name:""}),e=c({status:0,message:[]}),_={required:i=>!!i||"This field is required."},C=b(()=>!!m.query.editMode),M=b(()=>e.value.status==200?"success":"error");function F(){r.value={name:""},d.value.reset(),d.value.resetValidation()}async function q(){(await d.value.validate()).valid&&(e.value.message=[],t.value=!0,p.post("/ProductCategory",r.value).then(a=>{t.value=!1,n.value=!0,F()}).catch(a=>{t.value=!1;const s=Object.values(a.errors).flat();e.value.status=400,e.value.message=s}))}async function N(){(await d.value.validate()).valid&&(e.value.message=[],t.value=!0,await p.put("/ProductCategory",{name:r.value.name}).then(a=>{t.value=!1,e.value.status=200,e.value.message=[a.data.message]}).catch(a=>{t.value=!1;const s=Object.values(a.errors).flat();e.value.status=400,e.value.message=s}))}async function S(){await p.get(`/ProductCategory/${m.query.id}`).then(i=>{r.value=i,JSON.parse(JSON.stringify(r.value))})}return B(()=>{C.value&&S()}),(i,a)=>(u(),f(V,null,[o(j,{onSubmit:$(q,["prevent"]),ref_key:"formRef",ref:d,class:"mt-3"},{default:l(()=>[o(P,null,{default:l(()=>[o(U,{cols:"6",sm:"12",class:"py-1"},{default:l(()=>[o(A,{modelValue:r.value.name,"onUpdate:modelValue":a[0]||(a[0]=s=>r.value.name=s),label:"Category Name",rules:[_.required]},null,8,["modelValue","rules"])]),_:1})]),_:1}),C.value?(u(),g(y,{key:1,loading:t.value,class:"mt-2 ms-auto submit-btn",color:"success",onClick:N,block:""},{default:l(()=>[v(" Edit ")]),_:1},8,["loading"])):(u(),g(y,{key:0,loading:t.value,class:"mt-2 ms-auto submit-btn",color:"primary",type:"submit",block:""},{default:l(()=>[v(" Submit ")]),_:1},8,["loading"])),D("div",W,[e.value.message.length?(u(),g(E,{key:0,class:"mt-5",color:M.value,variant:"tonal"},{default:l(()=>[(u(!0),f(V,null,O(e.value.message,s=>(u(),f("div",null,[e.value.message.length>1?(u(),f("small",z,"-")):h("",!0),v(" "+T(s),1)]))),256))]),_:1},8,["color"])):h("",!0)])]),_:1},8,["onSubmit"]),o(I,{modelValue:n.value,"onUpdate:modelValue":a[2]||(a[2]=s=>n.value=s)},{actions:l(()=>[o(y,{color:"success",variant:"text",onClick:a[1]||(a[1]=s=>n.value=!1)},{default:l(()=>[v(" Close ")]),_:1})]),default:l(()=>[v(" Category has been added successfully! ")]),_:1},8,["modelValue"])],64))}});const Q=H(K,[["__scopeId","data-v-bb2e71a5"]]),ee=k({__name:"index",setup(w){const m=x(),n=b(()=>!!m.query.editMode),t=c(1);J(m,async()=>{t.value=Math.floor(Math.random()*10)+1});const d=L([{title:"Categories",disabled:!1,href:"/categories"},{title:n.value?"Edit":"Add",disabled:!0,href:"#"}]);return(r,e)=>{const _=G("UiParentCard");return u(),f("div",{key:t.value},[o(R,{title:n.value?"Edit Category":"Add Category",breadcrumbs:d.value},null,8,["title","breadcrumbs"]),o(_,{title:"Category",bg:"white"},{default:l(()=>[o(Q)]),_:1})])}}});export{ee as default};
