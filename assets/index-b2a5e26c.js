import{_ as N}from"./BaseBreadcrumb.vue_vue_type_style_index_0_lang-b3edf3f3.js";import{v as C,a6 as V,T as i,G as p,U as R,o as r,c as m,w as n,a as d,V as S,f as T,a7 as B,d as b,e as f,b as P,a8 as A,q as _,F as D,s as E,l as h,t as O,H as U,a9 as $,a3 as g,aa as j,x as I,n as J}from"./index-9fe8148e.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";const G={class:"d-flex"},H={key:0},W=C({__name:"addCategoryForm",setup(k){const c=V();i([]);const s=i(!1),o=i(null),e=i({name:""}),a=i({status:0,message:[]}),y={required:t=>!!t||"This field is required."},v=p(()=>!!c.query.editMode),x=p(()=>a.value.status==200?"success":"error");function w(){e.value={name:""},o.value.reset(),o.value.resetValidation()}async function M(){(await o.value.validate()).valid&&(a.value.message=[],s.value=!0,g.post("/ProductCategory",e.value).then(l=>{s.value=!1,a.value.status=200,a.value.message=[l.data.message],w()}).catch(l=>{s.value=!1;const u=Object.values(l.errors).flat();a.value.status=400,a.value.message=u}))}async function F(){(await o.value.validate()).valid&&(a.value.message=[],s.value=!0,await g.put("/ProductCategory",{name:e.value.name}).then(l=>{s.value=!1,a.value.status=200,a.value.message=[l.data.message]}).catch(l=>{s.value=!1;const u=Object.values(l.errors).flat();a.value.status=400,a.value.message=u}))}async function q(){await g.get(`/ProductCategory/${c.query.id}`).then(t=>{e.value=t,e.value.arrival_date=t.data.visa.arrival_date.split("T")[0],e.value.departure_date=t.data.visa.departure_date.split("T")[0],t.data.visa.phone[0]=="2"?(e.value.country_code=t.data.visa.phone.substring(0,2),e.value.phone=t.data.visa.phone.substring(2)):t.data.visa.phone[0]=="9"&&(e.value.country_code=t.data.visa.phone.substring(0,3),e.value.phone=t.data.visa.phone.substring(3)),JSON.parse(JSON.stringify(e.value))})}return R(()=>{v.value&&q()}),(t,l)=>(r(),m($,{onSubmit:U(M,["prevent"]),ref_key:"formRef",ref:o,class:"mt-3"},{default:n(()=>[d(S,null,{default:n(()=>[d(T,{cols:"6",sm:"12",class:"py-1"},{default:n(()=>[d(B,{modelValue:e.value.name,"onUpdate:modelValue":l[0]||(l[0]=u=>e.value.name=u),label:"Category Name",rules:[y.required]},null,8,["modelValue","rules"])]),_:1})]),_:1}),v.value?(r(),m(b,{key:1,loading:s.value,class:"mt-2 ms-auto submit-btn",color:"success",onClick:F,block:""},{default:n(()=>[f(" Edit ")]),_:1},8,["loading"])):(r(),m(b,{key:0,loading:s.value,class:"mt-2 ms-auto submit-btn",color:"primary",type:"submit",block:""},{default:n(()=>[f(" Submit ")]),_:1},8,["loading"])),P("div",G,[a.value.message.length?(r(),m(A,{key:0,class:"mt-5",color:x.value,variant:"tonal"},{default:n(()=>[(r(!0),_(D,null,E(a.value.message,u=>(r(),_("div",null,[a.value.message.length>1?(r(),_("small",H,"-")):h("",!0),f(" "+O(u),1)]))),256))]),_:1},8,["color"])):h("",!0)])]),_:1},8,["onSubmit"]))}});const z=L(W,[["__scopeId","data-v-11d63a7a"]]),Y=C({__name:"index",setup(k){const c=V(),s=p(()=>!!c.query.editMode),o=i(1);j(c,async()=>{o.value=Math.floor(Math.random()*10)+1});const e=I([{title:"Categories",disabled:!1,href:"/categories"},{title:s.value?"Edit":"Add",disabled:!0,href:"#"}]);return(a,y)=>{const v=J("UiParentCard");return r(),_("div",{key:o.value},[d(N,{title:s.value?"Edit Category":"Add Category",breadcrumbs:e.value},null,8,["title","breadcrumbs"]),d(v,{title:"Category",bg:"white"},{default:n(()=>[d(z)]),_:1})])}}});export{Y as default};
