import{T as o,x as E,U as $,n as B,o as i,q as c,b as t,a,w as s,X as A,Y as z,l as P,F as y,s as k,$ as L,a0 as M,e as V,a1 as R,I as F,d as m,a2 as Y,t as p,ag as Z,a3 as b,ae as q,B as W,Z as X,a4 as j,a5 as G}from"./index-9fe8148e.js";import{_ as H}from"./BaseBreadcrumb.vue_vue_type_style_index_0_lang-b3edf3f3.js";import{_ as J}from"./plugin-vue_export-helper-c27b6911.js";const K=_=>(j("data-v-d6fedeae"),_=_(),G(),_),Q={class:"d-flex align-end"},ee=K(()=>t("thead",null,[t("tr",null,[t("th",{class:"text-left"},"Customer Email"),t("th",{class:"text-left"},"Items"),t("th",{class:"text-left"},"Price"),t("th",{class:"text-left"},"Created at"),t("th",{class:"text-left"},"Status"),t("th",{class:"text-left"},"Actions")])],-1)),te={key:0},ae={colspan:"6",class:"text-center py-2"},le={style:{width:"300px"}},se={class:"actions-container d-flex"},oe={__name:"orders",setup(_){const d=o(!1),h=o(""),w=o([{name:"Pending",value:"Pending"},{name:"Payment Recevied",value:"PaymentRecevied"},{name:"Cancelled",value:"Cancelled"}]),v=o(!1),x=o(),S=o({title:"Products"}),r=o(!1),g=o(!1),I=E([{title:"Products",disabled:!0,href:"#"},{title:"All",disabled:!0,href:"#"}]),f=o([{buyerEmail:"Electronics",id:1,orderDate:"2024-06-07T18:39:09.298902Z",totalPrice:1,status:"pending",orderItems:[{productName:"phone"}]}]);function D(u){r.value=!0,x.value=u}function N(){g.value=!0;let u={id:x.value,status:"Cancelled"};b.put("/Order/update-status",u).then(()=>{d.value=!0,g.value=!1,r.value=!1,f.value=f.value.filter(l=>l.id!=x.value)}).catch(l=>{d.value=!0,h.value=l.message,g.value=!1,r.value=!1})}async function O(){v.value=!0,b.get("/Order?PageSize=1000").then(u=>{f.value=u.data,v.value=!1}).catch(()=>{v.value=!1})}function T(u,l){let C={id:f.value[l].id,status:u};b.put("/Order/update-status",C).then(e=>{d.value=!0,h.value=e.message}).catch(e=>{d.value=!0,h.value=e.message})}return $(()=>{O()}),(u,l)=>{const C=B("UiParentCard");return i(),c(y,null,[t("div",Q,[a(H,{title:S.value.title,breadcrumbs:I.value},null,8,["title","breadcrumbs"])]),a(C,{title:"Orders",bg:"white"},{default:s(()=>[a(A,{height:"68vh","fixed-header":"",elevation:"",class:"bg-white"},{default:s(()=>[ee,t("tbody",null,[v.value?(i(),c("tr",te,[t("td",ae,[a(z,{color:"primary",indeterminate:"",size:"100"})])])):P("",!0),v.value?P("",!0):(i(!0),c(y,{key:1},k(f.value,(e,U)=>(i(),c("tr",{key:e.id},[t("td",null,p(e.buyerEmail),1),t("td",null,[(i(!0),c(y,null,k(e.orderItems,n=>(i(),c("div",null,"-"+p(n.productName),1))),256))]),t("td",null,p(e.totalPrice),1),t("td",null,p(e.orderDate.split("T")[0]),1),t("td",le,[a(q,{label:"Status",items:w.value,"item-title":"name","item-value":"value","onUpdate:modelValue":[n=>T(n,U),n=>e.status=n],modelValue:e.status},null,8,["items","onUpdate:modelValue","modelValue"])]),t("td",null,[t("div",se,[a(m,{class:"me-2",size:"small",color:"info",icon:"",title:"view",to:`/order/${e.id}`},{default:s(()=>[a(W(X))]),_:2},1032,["to"]),a(m,{color:"error",title:"delete",onClick:n=>D(e.id)},{default:s(()=>[V("Cancel")]),_:2},1032,["onClick"])])])]))),128))])]),_:1})]),_:1}),a(Y,{modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=e=>r.value=e),"max-width":"500"},{default:s(()=>[a(L,{title:"Delete Product"},{default:s(()=>[a(M,null,{default:s(()=>[V(" Are you sure you want to Cancel this Order? ")]),_:1}),a(R,null,{default:s(()=>[a(F),a(m,{text:"No",onClick:l[0]||(l[0]=e=>r.value=!1),variant:"elevated",color:"info"}),a(m,{text:"Yes",color:"error",variant:"elevated",onClick:N,loading:g.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(Z,{modelValue:d.value,"onUpdate:modelValue":l[3]||(l[3]=e=>d.value=e)},{actions:s(()=>[a(m,{color:"success",variant:"text",onClick:l[2]||(l[2]=e=>d.value=!1)},{default:s(()=>[V(" Close ")]),_:1})]),default:s(()=>[V(p(h.value)+" ",1)]),_:1},8,["modelValue"])],64)}}},ne=J(oe,[["__scopeId","data-v-d6fedeae"]]);export{ne as default};
