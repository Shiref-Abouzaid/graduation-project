import{_ as R}from"./BaseBreadcrumb.vue_vue_type_style_index_0_lang-7d00c6fc.js";import{v as k,a7 as x,T as c,G as b,U as B,o as n,q as f,a as o,w as l,V as P,f as U,a8 as A,c as g,d as y,e as v,b as D,a9 as E,F as V,s as O,l as h,t as T,H as $,aa as j,a3 as I,a4 as p,ab as J,x as L,n as G}from"./index-1c425f3e.js";import{_ as H}from"./_plugin-vue_export-helper-c27b6911.js";const W={class:"d-flex"},z={key:0},K=k({__name:"addCategoryForm",setup(w){const m=x(),r=c(!1),a=c(!1),d=c(null),u=c({name:""}),t=c({status:0,message:[]}),_={required:i=>!!i||"This field is required."},C=b(()=>!!m.query.editMode),M=b(()=>t.value.status==200?"success":"error");function F(){u.value={name:""},d.value.reset(),d.value.resetValidation()}async function S(){(await d.value.validate()).valid&&(t.value.message=[],a.value=!0,p.post("/ProductCategory",u.value).then(e=>{a.value=!1,r.value=!0,F()}).catch(e=>{a.value=!1;const s=Object.values(e.errors).flat();t.value.status=400,t.value.message=s}))}async function q(){(await d.value.validate()).valid&&(t.value.message=[],a.value=!0,await p.put("/ProductCategory",{name:u.value.name}).then(e=>{a.value=!1,r.value=!0}).catch(e=>{a.value=!1;const s=Object.values(e.errors).flat();t.value.status=400,t.value.message=s}))}async function N(){await p.get(`/ProductCategory/${m.query.id}`).then(i=>{u.value=i,JSON.parse(JSON.stringify(u.value))})}return B(()=>{C.value&&N()}),(i,e)=>(n(),f(V,null,[o(j,{onSubmit:$(S,["prevent"]),ref_key:"formRef",ref:d,class:"mt-3"},{default:l(()=>[o(P,null,{default:l(()=>[o(U,{cols:"6",sm:"12",class:"py-1"},{default:l(()=>[o(A,{modelValue:u.value.name,"onUpdate:modelValue":e[0]||(e[0]=s=>u.value.name=s),label:"Category Name",rules:[_.required]},null,8,["modelValue","rules"])]),_:1})]),_:1}),C.value?(n(),g(y,{key:1,loading:a.value,class:"mt-2 ms-auto submit-btn",color:"success",onClick:q,block:""},{default:l(()=>[v(" Edit ")]),_:1},8,["loading"])):(n(),g(y,{key:0,loading:a.value,class:"mt-2 ms-auto submit-btn",color:"primary",type:"submit",block:""},{default:l(()=>[v(" Submit ")]),_:1},8,["loading"])),D("div",W,[t.value.message.length?(n(),g(E,{key:0,class:"mt-5",color:M.value,variant:"tonal"},{default:l(()=>[(n(!0),f(V,null,O(t.value.message,s=>(n(),f("div",null,[t.value.message.length>1?(n(),f("small",z,"-")):h("",!0),v(" "+T(s),1)]))),256))]),_:1},8,["color"])):h("",!0)])]),_:1},8,["onSubmit"]),o(I,{modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=s=>r.value=s)},{actions:l(()=>[o(y,{color:"success",variant:"text",onClick:e[1]||(e[1]=s=>r.value=!1)},{default:l(()=>[v(" Close ")]),_:1})]),default:l(()=>[v(" Successed! ")]),_:1},8,["modelValue"])],64))}});const Q=H(K,[["__scopeId","data-v-220a1fec"]]),ee=k({__name:"index",setup(w){const m=x(),r=b(()=>!!m.query.editMode),a=c(1);J(m,async()=>{a.value=Math.floor(Math.random()*10)+1});const d=L([{title:"Categories",disabled:!1,href:"/categories"},{title:r.value?"Edit":"Add",disabled:!0,href:"#"}]);return(u,t)=>{const _=G("UiParentCard");return n(),f("div",{key:a.value},[o(R,{title:r.value?"Edit Category":"Add Category",breadcrumbs:d.value},null,8,["title","breadcrumbs"]),o(_,{title:"Category",bg:"white"},{default:l(()=>[o(Q)]),_:1})])}}});export{ee as default};
